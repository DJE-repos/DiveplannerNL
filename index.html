<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luchtplanner</title>
    <link rel="stylesheet" href="css/style.css">
    
</head>
<body>
    <div>
        <h1>
            <span class="title">ü§ø Duikplanner</span>
            <div class="header-controls">
                <button id="jsonImportBtn" class="header-btn">üìÇ import</button>
                <button id="jsonExportBtn" class="header-btn">üíæ export</button>
                <input type="file" id="jsonFileInput" accept=".json" style="display: none;">
            </div>
        </h1>
		<div class="settings-section">
            <h3 class="collapsible" onclick="this.classList.toggle('collapsed'); const w=this.nextElementSibling; if(this.classList.contains('collapsed')){w.style.display='none';} else{w.style.display='grid';}">
                üìù Duik info <span class="collapse-arrow">‚ñº</span> 
            </h3>
            <div class="settings-row">
                <div class="input-group">
                    <label for="duiker">Duiker</label>
                    <input type="text" name="duiker" value="">
                </div>
                <div class="input-group">
                    <label for="location">Duiklocatie</label>
                    <input type="text" name="duiklocatie" value="">
                </div>
                <div class="input-group">
                    <label for="datum">Datum</label>
                    <input type="date" name="datum" value="">
                </div>
                <div class="input-group">
                    <label for="kentering">Kentering</label>
                    <input type="time" name="kentering" value="">
                </div>
                <div class="input-group">
                    <label for="type">Type</label>
                    <select name="type">
                        <option value="LW">LW</option>
                        <option value="HW">HW</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="settings-section">
            <h3 class="collapsible" onclick="this.classList.toggle('collapsed'); const w=this.nextElementSibling; if(this.classList.contains('collapsed')){w.style.display='none';} else{w.style.display='grid';}">
                ‚öôÔ∏è Duik parameters <span class="collapse-arrow">‚ñº</span> 
            </h3>
            <div class="settings-row parameters-row">
                <div class="input-group">
                    <label for="airConsumption">Verbruik (l/min)</label>
                    <input type="number" name="airConsumption_preset" value="21" step="0.1" min="0">
				</div>
				<div class="input-group">
					<label for="airConsumption">Flesinhoud (l)</label>
                    <input type="number" name="Flesinhoud" value="10" step="0.1" min="0">
				</div>
				<div class="input-group">
					<label for="airConsumption">Flesdruk (bar)</label>
					<input type="number" name="Flesdruk" value="280" step="0.1" min="0">
                </div>
                <div class="input-group">
					<label for="MOD">MDD (m)</label>
					<input type="number" name="MOD" value="0" step="1" min="0">
                </div>
                <div class="input-group">
					<label for="EAN‚Çì">EAN‚Çì (%)</label>
					<input type="number" name="EANx" value="21" step="1" min="21">
                </div>
                <div class="input-group">
                    <label for="usingReel">Gebruik wrakreel</label>
                    <input type="checkbox" name="usingReel">
				</div>
            </div>
        </div>
        <div class="stats-grid-mini">
            <div class="stat-card">
                <div class="stat-value" id="minPressure">0</div>
                <div class="stat-label">reserve druk (bar)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="returnPressure">0</div>
                <div class="stat-label">omk druk (bar)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="nultijd">0</div>
                <div class="stat-label">Nultijd (min)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="pO2">0</div>
                <div class="stat-label">pO‚ÇÇ (%)</div>
            </div>
        </div>
        <div class="chart-container">
            <h2 class="collapsible" onclick="this.classList.toggle('collapsed'); const w=this.nextElementSibling; if(this.classList.contains('collapsed')){w.style.display='none';} else{w.style.display='block';}">
                üìà Duikprofiel <span class="collapse-arrow">‚ñº</span> 
            </h2>
            <canvas id="depthChart"></canvas>
        </div>
        <div class="chart-container">
            <h2 class="collapsible" onclick="this.classList.toggle('collapsed'); const w=this.nextElementSibling; if(this.classList.contains('collapsed')){w.style.display='none';} else{w.style.display='block';}">
                ùÑú Duiktabel <span class="collapse-arrow">‚ñº</span>
            </h2>
            <div class="table-content-wrapper">
                <div class="table-container">
                    <table id="dataTable">
                    <thead>
                        <tr id="headerRow">
                            <th class="row-number">#</th>
                            <th class="time_cumu">Tijd cumu</th>
                            <th class="time">Tijd (min)</th>
                            <th class="depth">diepte (m)</th>
                            <th class="depth_pressure">bar druk</th>
                            <th class="air_consumption">verbruik (L)</th>
                            <th class="air_consumption">flesdruk (bar)</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr class="fade-in" draggable="true">
                            <td class="row-number drag-handle">1</td>
                            <td><input type="number" name="time_cumu_val" class="readonly" value="0" placeholder="0" step=".5" readonly="readonly"></td>
                            <td><input type="number" name="time_val" class="readonly" value="0" placeholder="0" step=".5" readonly="readonly"></td>
                            <td><input type="number" name="depth_val" class="readonly" value="0" placeholder="0" step="0.1" readonly="readonly"></td>
                            <td><input type="number" name="depth_pressure_val" class="readonly" value="1.0" placeholder="1.0" step="0.1" readonly="readonly"></td>
                            <td><input type="number" name="air_consumption_val" class="readonly" value="0" placeholder="0" step=".5" readonly="readonly"></td>
                            <td><input type="number" name="remaining_pressure_val" class="readonly" value="0" placeholder="0" step=".5" readonly="readonly"></td>
                            <td class="actions">
                                <div class="move-buttons">
                                    <button class="btn btn-move" onclick="moveRowUp(this)" title="Move Up">‚Üë</button>
                                    <button class="btn btn-move" onclick="moveRowDown(this)" title="Move Down">‚Üì</button>
                                    <button class="btn btn-danger" onclick="deleteRow(this)">üóëÔ∏è</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
                <div class="table-controls">
                    <button class="btn btn-primary" onclick="addRow()">‚ûï Row</button>
                    <button class="btn btn-primary" onclick="add2Rows()">‚ûï 2 Rows</button>
                    <button class="btn btn-primary" onclick="addSafetyStop()">‚ûï Safety stop</button>
                </div>
            </div>
        </div>
		<div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalTime" name="totalTimeMetric">0</div>
                <div class="stat-label">Total Time (min)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="maxDepth">0</div>
                <div class="stat-label">MOD (m)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="EquivilantAirDepth">0</div>
                <div class="stat-label">EAD (m)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgDepth">0</div>
                <div class="stat-label">Avg Depth (m)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalAirConsumption">0</div>
                <div class="stat-label">Total Air (l)</div>
            </div>

            <div class="stat-card">
                <div class="stat-value" id="intervalgroup">A</div>
                <div class="stat-label">HHG</div>
            </div>
            
        </div>
        <div class="air-table-container">
            <h2 class="collapsible collapsed" onclick="this.classList.toggle('collapsed'); const w=this.nextElementSibling; if(this.classList.contains('collapsed')){w.style.display='none';} else{w.style.display='block';}">
                üìä Duiktabel (Table A) <span class="collapse-arrow">‚ñº</span>
            </h2>
            <div class="air-table-wrapper" style="display: none;">
                <table id="airTableDisplay"></table>
            </div>
        </div>
		
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script type="text/javascript" src="js/air_planner.js"></script>
</body>
</html>